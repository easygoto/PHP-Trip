# PHP长期旅行

- [x] 整理项目结构
- [x] 把设计模式迁移进来
- [x] 将单例模式替换为注入依赖模式
- [ ] ~~组件适配, 同类组件统一方法~~
- [ ] 完善其他组件
    - [ ] 日志相关
    - [ ] 缓存相关/消息队列相关
    - [ ] 关系型数据库/非关系型数据库
    - [ ] 系统文件操作相关
- [ ] 完善其他工具
    - [ ] 数组/对象/赋值相关
    - [ ] 格式化/序列化相关
    - [ ] 请求参数/返回结果
    - [x] 图片处理相关
        - [ ] 处理透明图片
    - [x] 网络请求相关
- [ ] 校验链/业务链
- [ ] 数据调用中心/数据的唯一性
- [ ] 数据库更新策略
- [ ] MVC 架构研究
- [ ] 测试框架的深入研究

## 项目结构

```
app : 应用目录
core : 核心库
  |--Component : 组件, 一般放在容器中注入依赖
  |--Container : 容器, 常量
  |--Helper : 工具方法, 之间不可有依赖关系
data : 配置及数据
  |--backup : 备份文件,sql改动
  |--config : 配置文件
  |--docs : 文档
  |--temp : 缓存
dp : 学习设计模式的目录
public : 网站根目录
  |--resource : 
       |--images : 资源图片
       |--wxcode : 微信码
src : 组件、工具等
  |--Container : 带有逻辑的常量和容器
  |--Component : 封装别人的组件
  |--Model : 数据库对接层
  |--Service : 业务逻辑层
  |--Controller : 控制路由层
  |--View : 页面显示层
  |--Helper : 带有逻辑的库和组件
tests : 测试板块
```

## 项目规范

- 基础规范为 PSR-2

### 组件规范

- 组件可以依赖工具、其他组件
- 组件使用非静态的方法处理事情

# 设计模式应用

## 抽象工厂(Abstract Factory)

## 工厂(Factory)

### 电子厂(Electronics)

简单。假设一家电子厂生产电脑、手机、手表等。各产品都有自己不同的分类, 例如电脑工厂只创建电脑, 创建什么电脑通过参数来调整, 新增某种型号的电脑直接增加这个电脑的类即可。

## 依赖注入(Dependency Injection)

### 公司依赖关系(Company)

简单。假设公司中的员工有三种身份: 销售、技术、客服。技术不直接和客户对接, 销售和客服解决技术方面的问题会依赖技术。

# 兴趣 : 逐步探索DOTA

## 类

- 技能
- 英雄
- 军团
- 比赛
- 地图
- 操作
- ...

## 一些简单的例子

1. 流浪剑客(Sven)对斧王(Axe)施放风暴之锤技能, 魔法值减少150点, 斧王(Axe)受到流浪剑客(Sven)的风暴之锤作用, 生命值减少200点, 晕眩时间2秒
    - [ ] 需要有英雄工厂
    - [ ] 需要技能工厂
    - [x] trait 优化(至少在 IDE 中显示没毛病)
